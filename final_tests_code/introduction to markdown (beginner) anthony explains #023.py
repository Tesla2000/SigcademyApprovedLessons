import random
import langchain_openai
import langchain_core
def generate_questions() -> list[str]:
    questions = ['What is markdown?', 'How do the speaker create an unordered list in markdown?', 'How do the speaker create a nested unordered list in markdown?', 'How can the speaker continue a bullet item without introducing new bulleted items in markdown?', 'What is the syntax for creating an ordered (numbered) list in markdown?', 'Can the speaker customize the numbering in a markdown ordered list?', 'What are the benefits of not numbering lists in markdown?', 'How can the speaker create checkboxes in markdown?', 'What are the two ways to create code blocks in markdown?', 'What are some common types of code blocks in markdown?', 'How can the speaker create headers in markdown?', 'What are the two forms of links in markdown?', 'What is the syntax for inline links in Markdown?', 'What is the syntax for reference-based links in Markdown?', 'How do the speaker format images in Markdown?', 'How do the speaker format text as bold in Markdown?', 'How do the speaker format text as italic in Markdown?', 'How do the speaker create block quotes in Markdown?', 'What is the recommendation for checking the rendering of markdown?', 'What is the specific type of markdown mentioned in the text?', 'Where can additional questions or requests be made according to the text?']
    return random.sample(questions, min(len(questions), 5))


def generate_answers(question: str, answer: str, _: str) -> bool | str:
    reference_answers = dict(zip(['What is markdown?', 'How do the speaker create an unordered list in markdown?', 'How do the speaker create a nested unordered list in markdown?', 'How can the speaker continue a bullet item without introducing new bulleted items in markdown?', 'What is the syntax for creating an ordered (numbered) list in markdown?', 'Can the speaker customize the numbering in a markdown ordered list?', 'What are the benefits of not numbering lists in markdown?', 'How can the speaker create checkboxes in markdown?', 'What are the two ways to create code blocks in markdown?', 'What are some common types of code blocks in markdown?', 'How can the speaker create headers in markdown?', 'What are the two forms of links in markdown?', 'What is the syntax for inline links in Markdown?', 'What is the syntax for reference-based links in Markdown?', 'How do the speaker format images in Markdown?', 'How do the speaker format text as bold in Markdown?', 'How do the speaker format text as italic in Markdown?', 'How do the speaker create block quotes in Markdown?', 'What is the recommendation for checking the rendering of markdown?', 'What is the specific type of markdown mentioned in the text?', 'Where can additional questions or requests be made according to the text?'], ['Markdown is a common way to write text in a particular format that gets rendered in various ways. It is commonly used for documentation, GitHub issues, messaging software, and more.', 'To create an unordered list in markdown, start each bullet with a dash (-) followed by a space.', 'To create a nested unordered list in markdown, indent the sublist items inside the parent list item.', 'To continue a bullet item without introducing new bulleted items in markdown, the speaker can indent the text directly under the previous item to align it with the bullet.', 'To create an ordered (numbered) list in markdown, start each item with a number followed by a period and a space.', 'Yes, the speaker can customize the numbering in a markdown ordered list by starting each item with any number. The actual number displayed will be determined by the order of the items in the list.', 'The benefits of not numbering lists in markdown include easier editing and flexibility. By not numbering lists, the speaker can easily add or remove items without having to renumber everything. This makes it more convenient to make changes to the list without worrying about maintaining the correct order of numbers.', 'To create checkboxes in markdown, the speaker can use square brackets with a space inside. For example, [ ], [x]. The space between the square brackets is important for rendering the checkboxes correctly. To create a checked checkbox, the speaker can use [x].', 'There are two ways to create code blocks in markdown: indented code blocks and fenced code blocks. Indented code blocks involve indenting the code by four spaces. Fenced code blocks require using three backticks (`) before and after the code block. Fenced code blocks allow for specifying the language for syntax highlighting.', 'Some common types of code blocks in markdown include inline fixed-width text using a single backtick (`), multi-line code blocks using three backticks (```), and shell sessions with console output.', 'Headers in markdown can be created using octothorpes (#). The number of octothorpes determines the size of the header, with a single octothorpe (#) creating the largest header (h1) and more octothorpes creating smaller headers (h2 to h6).', 'The two forms of links in markdown are inline links and reference links. Inline links use brackets [] for the link text and parentheses () for the link URL, while reference links use a reference label defined elsewhere in the document.', 'Inline links in Markdown are written with link text in brackets followed by the link in parentheses. For example: [link text](link).', 'Reference-based links in Markdown use brackets for the link text and a reference at the bottom of the document. For example: [link text][reference].', 'Images in Markdown are formatted with an exclamation mark, followed by brackets for alt text, and parentheses for the image link. For example: ![alt text](image link).', 'Text can be formatted as bold in Markdown by using two asterisks before and after the text. For example: **bold text**.', 'Text can be formatted as italic in Markdown by using underscores before and after the text. For example: _italic text_.', 'Block quotes in Markdown are created by using a right angle bracket followed by a space at the beginning of the line. For example: > block quote.', "Clicking the preview to make sure it's rendering as expected.", 'GitHub flavored markdown.', 'Leave a comment below, reach out on Twitter, or visit the Twitch stream.']))
    chat = langchain_openai.ChatOpenAI(model="gpt-3.5-turbo-1106", temperature=0)
    chat_answer = chat.invoke(
        [
            langchain_core.messages.SystemMessage(content="You will be given question, reference answer pair and users answer. "
                                  'You have to decide if the answer is correct. '
                                  'If it is respond with a single work "Correct" otherwise return a hint about the answer. '),
            langchain_core.messages.SystemMessage(content='The question: ' + question + '\n'
                                  'The reference answer: ' + reference_answers[question]),
            langchain_core.messages.HumanMessage(
                content=answer
            )
        ]
    ).content
    if chat_answer.startswith("Correct"):
        return True
    return chat_answer
