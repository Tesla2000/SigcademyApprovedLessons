import random
import langchain_openai
import langchain_core
def generate_questions() -> list[str]:
    questions = ['What are regular expressions?', 'What is the abbreviation for regular expressions that the speaker uses?', 'What tool is used to look for pattern matching in a file or standard input?', 'What does the dot character represent in regular expressions?', 'What is the first special character in regular expressions?', 'How can the speaker match a literal period in a regular expression?', 'What are anchors in regular expressions and how do they work?', 'What does the star character (*) in regular expressions mean?', 'What does the plus character (+) in regular expressions mean?', 'What does the question mark character (?) in regular expressions mean?', 'What does the curly braces ({}) in regular expressions indicate?', 'What does the dot symbol in regular expressions match?', 'What does a bracketed character class in regular expressions represent?', 'How can the speaker specify a range of characters in a character class in regular expressions?', 'What does a dash in a regular expression represent?', 'How can the speaker match a literal dash character in a regular expression?', 'What does the pipe symbol (|) represent in a regular expression?', 'What is the purpose of parentheses in a regular expression?']
    return random.sample(questions, min(len(questions), 5))


def generate_answers(question: str, answer: str, _: str) -> bool | str:
    reference_answers = dict(zip(['What are regular expressions?', 'What is the abbreviation for regular expressions that the speaker uses?', 'What tool is used to look for pattern matching in a file or standard input?', 'What does the dot character represent in regular expressions?', 'What is the first special character in regular expressions?', 'How can the speaker match a literal period in a regular expression?', 'What are anchors in regular expressions and how do they work?', 'What does the star character (*) in regular expressions mean?', 'What does the plus character (+) in regular expressions mean?', 'What does the question mark character (?) in regular expressions mean?', 'What does the curly braces ({}) in regular expressions indicate?', 'What does the dot symbol in regular expressions match?', 'What does a bracketed character class in regular expressions represent?', 'How can the speaker specify a range of characters in a character class in regular expressions?', 'What does a dash in a regular expression represent?', 'How can the speaker match a literal dash character in a regular expression?', 'What does the pipe symbol (|) represent in a regular expression?', 'What is the purpose of parentheses in a regular expression?'], ['Regular expressions are patterns used to match character combinations in strings.', "The speaker uses the abbreviation 'reg X' for regular expressions.", "The tool used is 'grep'.", 'The dot character represents a single character wildcard in regular expressions.', 'The dot (.) character is the first special character in regular expressions. It acts as a single character wildcard.', 'To match a literal period in a regular expression, the speaker can use an escape character, which is typically a backslash. For example, \\., will match a literal period.', 'Anchors in regular expressions are special characters that specify the position of a match within a string. The caret (^) anchor matches the beginning of a line, while the dollar sign ($) anchor matches the end of a line. Using both anchors (^hello$) ensures that the entire string must match the pattern.', 'The star character matches zero or more of the previous character or group.', 'The plus character matches one or more of the previous character or group.', 'The question mark matches zero or one of the previous character or group.', 'The curly braces indicate an exact repeat counter or a range for the previous character or group.', 'The dot symbol matches any single character except for a newline character.', 'A bracketed character class represents a single character that can be any of the characters specified within the brackets.', 'You can specify a range of characters by using a hyphen between the starting and ending characters in the character class, such as [a-z] for all lowercase letters from a to z.', 'A dash in a regular expression represents a range of characters, such as a-z for all lowercase letters.', 'To match a literal dash character in a regular expression, the speaker can place it at the end of a character class or escape it with a backslash.', 'The pipe symbol (|) in a regular expression represents an exclusive OR operation, allowing the speaker to match one thing or the other.', 'Parentheses in a regular expression allow the speaker to group parts of expressions, control the order of operations, and create subpatterns for matching.']))
    chat = langchain_openai.ChatOpenAI(model="gpt-3.5-turbo-1106", temperature=0)
    chat_answer = chat.invoke(
        [
            langchain_core.messages.SystemMessage(content="You will be given question, reference answer pair and users answer. "
                                  'You have to decide if the answer is correct. '
                                  'If it is respond with a single work "Correct" otherwise return a hint about the answer. '),
            langchain_core.messages.SystemMessage(content='The question: ' + question + '\n'
                                  'The reference answer: ' + reference_answers[question]),
            langchain_core.messages.HumanMessage(
                content=answer
            )
        ]
    ).content
    if chat_answer.startswith("Correct"):
        return True
    return chat_answer
